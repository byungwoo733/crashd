crashd
===========

Summary
-------
crashd and libSegFault implementation for crash report generation

Description
-----------
crashd daemon takes the crash report generated by libSegFault.so, and submits it
to rdxd. libSegFault is used for installing fault handlers for processes. Upon
receiving fault signal (like SEGFAULT), it generates a report with backtrace
and stores it in a predefined location.

To enable crash report generation, set LD\_PRELOAD environment variable to
include libSegFault.so. Similarly, to diable crash report generation, remove
libSegFault.so from LD\_PRELOAD.

To include memory map information retrieved from "/proc/self/maps" into the
crash report, #define following flag:
HAVE\_PROC\_SELF

libSegFault behavior can be customized by following environment variables:

SEGFAULT\_SIGNALS: Can be used to specify which signals should be used for
generating the crash report. Default is segv. If "all" is specified then
libSegFault will install handlers for SIGSEGV, SIGILL, SIGBUS, SIGSTKFLT,
SIGABRT, SIGFPE

SEGFAULT\_NO\_ALTSTACK: Do not use separate stack for signal handling

SEGFAULT\_OUTPUT\_NAME: file name for storing the crash report, by default it
is process\_name.pid

Dependencies
============

Below are the tools (and their minimum versions) required to build _crashd_:

- cmake (version required by webosose/cmake-modules-webos)
- gcc 4.6.3
- glib-2.0 2.32.1
- make (any version)
- webosose/cmake-modules-webos 1.0.0 RC4
- webosose/PmLogLib 3.0.0
- webos-pro/rdxd 3.0.0

How to Build on Linux
=====================

## Building

Once you have downloaded the source, enter the following to build it (after
changing into the directory under which it was downloaded):

    $ mkdir BUILD
    $ cd BUILD
    $ cmake ..
    $ make
    $ sudo make install

The directory under which the files are installed defaults to `/usr/local/webos`.
You can install them elsewhere by supplying a value for `WEBOS_INSTALL_ROOT`
when invoking `cmake`. For example:

    $ cmake -D WEBOS_INSTALL_ROOT:PATH=$HOME/projects/webosose ..
    $ make
    $ make install

will install the files in subdirectories of `$HOME/projects/webosose`.

Specifying `WEBOS_INSTALL_ROOT` also causes `pkg-config` to look in that tree
first before searching the standard locations. You can specify additional
directories to be searched prior to this one by setting the `PKG_CONFIG_PATH`
environment variable.

If not specified, `WEBOS_INSTALL_ROOT` defaults to `/usr/local/webos`.

To configure for a debug build, enter:

    $ cmake -D CMAKE_BUILD_TYPE:STRING=Debug ..

To see a list of the make targets that `cmake` has generated, enter:

    $ make help

## Uninstalling

From the directory where you originally ran `make install`, enter:

    $ [sudo] make uninstall

You will need to use `sudo` if you did not specify `WEBOS_INSTALL_ROOT`.

# Copyright and License Information

See the file LICENSE.
